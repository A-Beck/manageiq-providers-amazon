---
http_interactions:
- request:
    method: post
    uri: https://ec2.us-east-1.amazonaws.com/
    body:
      encoding: UTF-8
      string: Action=DescribeInstances&Filter.1.Name=instance-id&Filter.1.Value.1=i-015e4579bfa4fcc84&Version=2016-11-15
    headers:
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby2/2.8.14 ruby/2.3.0 x86_64-linux resources
      X-Amz-Date:
      - 20170418T110607Z
      X-Amz-Content-Sha256:
      - 9c54223feaca4cd0c17fe4ecb476dd13f86c7df370119c53beeb96a36577e7a0
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AMAZON_CLIENT_ID/20170418/us-east-1/ec2/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=67b2789420160d59c13cfa6719934fc5b4f8f015f2fba93e16b4d6f20f923bef
      Content-Length:
      - '106'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - text/xml;charset=UTF-8
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Date:
      - Tue, 18 Apr 2017 11:06:12 GMT
      Server:
      - AmazonEC2
    body:
      encoding: UTF-8
      string: |-
        <?xml version="1.0" encoding="UTF-8"?>
        <DescribeInstancesResponse xmlns="http://ec2.amazonaws.com/doc/2016-11-15/">
            <requestId>5323a593-c070-4733-b971-54ee864886fc</requestId>
            <reservationSet>
                <item>
                    <reservationId>r-0ba103c480816de70</reservationId>
                    <ownerId>200278856672</ownerId>
                    <groupSet/>
                    <instancesSet>
                        <item>
                            <instanceId>i-015e4579bfa4fcc84</instanceId>
                            <imageId>ami-6869aa05</imageId>
                            <instanceState>
                                <code>272</code>
                                <name>running</name>
                            </instanceState>
                            <privateDnsName>ip-10-2-0-104.ec2.internal</privateDnsName>
                            <dnsName/>
                            <reason/>
                            <keyName>EmsRefreshSpec-KeyPair</keyName>
                            <amiLaunchIndex>0</amiLaunchIndex>
                            <productCodes/>
                            <instanceType>t2.nano</instanceType>
                            <launchTime>2017-03-28T11:32:09.000Z</launchTime>
                            <placement>
                                <availabilityZone>us-east-1c</availabilityZone>
                                <groupName/>
                                <tenancy>default</tenancy>
                            </placement>
                            <monitoring>
                                <state>disabled</state>
                            </monitoring>
                            <subnetId>subnet-fc014299</subnetId>
                            <vpcId>vpc-c9062baf</vpcId>
                            <privateIpAddress>10.2.0.104</privateIpAddress>
                            <ipAddress>34.206.127.107</ipAddress>
                            <sourceDestCheck>true</sourceDestCheck>
                            <groupSet>
                                <item>
                                    <groupId>sg-a5109cda</groupId>
                                    <groupName>EmsRefreshSpecStack-InstanceSecurityGroup-1PP763K6ZBVLF</groupName>
                                </item>
                            </groupSet>
                            <architecture>x86_64</architecture>
                            <rootDeviceType>ebs</rootDeviceType>
                            <rootDeviceName>/dev/xvda</rootDeviceName>
                            <blockDeviceMapping>
                                <item>
                                    <deviceName>/dev/xvda</deviceName>
                                    <ebs>
                                        <volumeId>vol-0360da66b06e06a36</volumeId>
                                        <status>attached</status>
                                        <attachTime>2017-03-28T11:32:10.000Z</attachTime>
                                        <deleteOnTermination>true</deleteOnTermination>
                                    </ebs>
                                </item>
                            </blockDeviceMapping>
                            <virtualizationType>hvm</virtualizationType>
                            <clientToken>EmsRe-WebSe-U5GV6MNANNW5</clientToken>
                            <tagSet>
                                <item>
                                    <key>Application</key>
                                    <value>arn:aws:cloudformation:us-east-1:200278856672:stack/EmsRefreshSpecStack-WebServerInstance-1PAB3IELQ8EYT/28cef7b0-13aa-11e7-8260-503aca4a58d1</value>
                                </item>
                                <item>
                                    <key>aws:cloudformation:logical-id</key>
                                    <value>WebServerInstance</value>
                                </item>
                                <item>
                                    <key>aws:cloudformation:stack-id</key>
                                    <value>arn:aws:cloudformation:us-east-1:200278856672:stack/EmsRefreshSpecStack-WebServerInstance-1PAB3IELQ8EYT/28cef7b0-13aa-11e7-8260-503aca4a58d1</value>
                                </item>
                                <item>
                                    <key>aws:cloudformation:stack-name</key>
                                    <value>EmsRefreshSpecStack-WebServerInstance-1PAB3IELQ8EYT</value>
                                </item>
                            </tagSet>
                            <hypervisor>xen</hypervisor>
                            <networkInterfaceSet>
                                <item>
                                    <networkInterfaceId>eni-39de4e2d</networkInterfaceId>
                                    <subnetId>subnet-fc014299</subnetId>
                                    <vpcId>vpc-c9062baf</vpcId>
                                    <description/>
                                    <ownerId>200278856672</ownerId>
                                    <status>in-use</status>
                                    <macAddress>02:19:d7:18:20:b4</macAddress>
                                    <privateIpAddress>10.2.0.104</privateIpAddress>
                                    <sourceDestCheck>true</sourceDestCheck>
                                    <groupSet>
                                        <item>
                                            <groupId>sg-a5109cda</groupId>
                                            <groupName>EmsRefreshSpecStack-InstanceSecurityGroup-1PP763K6ZBVLF</groupName>
                                        </item>
                                    </groupSet>
                                    <attachment>
                                        <attachmentId>eni-attach-31584fa8</attachmentId>
                                        <deviceIndex>0</deviceIndex>
                                        <status>attached</status>
                                        <attachTime>2017-03-28T11:32:09.000Z</attachTime>
                                        <deleteOnTermination>true</deleteOnTermination>
                                    </attachment>
                                    <association>
                                        <publicIp>34.206.127.107</publicIp>
                                        <publicDnsName/>
                                        <ipOwnerId>200278856672</ipOwnerId>
                                    </association>
                                    <privateIpAddressesSet>
                                        <item>
                                            <privateIpAddress>10.2.0.104</privateIpAddress>
                                            <primary>true</primary>
                                            <association>
                                            <publicIp>34.206.127.107</publicIp>
                                            <publicDnsName/>
                                            <ipOwnerId>200278856672</ipOwnerId>
                                            </association>
                                        </item>
                                    </privateIpAddressesSet>
                                    <ipv6AddressesSet/>
                                </item>
                            </networkInterfaceSet>
                            <ebsOptimized>false</ebsOptimized>
                            <enaSupport>true</enaSupport>
                        </item>
                    </instancesSet>
                </item>
            </reservationSet>
        </DescribeInstancesResponse>
    http_version: 
  recorded_at: Tue, 18 Apr 2017 11:06:13 GMT
- request:
    method: post
    uri: https://ec2.us-east-1.amazonaws.com/
    body:
      encoding: UTF-8
      string: Action=DescribeNetworkInterfaces&Filter.1.Name=network-interface-id&Filter.1.Value.1=eni-39de4e2d&Version=2016-11-15
    headers:
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby2/2.8.14 ruby/2.3.0 x86_64-linux resources
      X-Amz-Date:
      - 20170418T110613Z
      X-Amz-Content-Sha256:
      - 6696a152144c69b9f1399cce6764128fa369a5321cb21e64f5997748e112854b
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AMAZON_CLIENT_ID/20170418/us-east-1/ec2/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=5248f9f8e4dd19d94d01a72713e31c4478366474057dff8fadfe9ad6de23c007
      Content-Length:
      - '116'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - text/xml;charset=UTF-8
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Date:
      - Tue, 18 Apr 2017 11:06:14 GMT
      Server:
      - AmazonEC2
    body:
      encoding: UTF-8
      string: |-
        <?xml version="1.0" encoding="UTF-8"?>
        <DescribeNetworkInterfacesResponse xmlns="http://ec2.amazonaws.com/doc/2016-11-15/">
            <requestId>4ae5fe55-d2be-4949-98f2-4e87fc06a1e1</requestId>
            <networkInterfaceSet>
                <item>
                    <networkInterfaceId>eni-39de4e2d</networkInterfaceId>
                    <subnetId>subnet-fc014299</subnetId>
                    <vpcId>vpc-c9062baf</vpcId>
                    <availabilityZone>us-east-1c</availabilityZone>
                    <description/>
                    <ownerId>200278856672</ownerId>
                    <requesterManaged>false</requesterManaged>
                    <status>in-use</status>
                    <macAddress>02:19:d7:18:20:b4</macAddress>
                    <privateIpAddress>10.2.0.104</privateIpAddress>
                    <sourceDestCheck>true</sourceDestCheck>
                    <groupSet>
                        <item>
                            <groupId>sg-a5109cda</groupId>
                            <groupName>EmsRefreshSpecStack-InstanceSecurityGroup-1PP763K6ZBVLF</groupName>
                        </item>
                    </groupSet>
                    <attachment>
                        <attachmentId>eni-attach-31584fa8</attachmentId>
                        <instanceId>i-015e4579bfa4fcc84</instanceId>
                        <instanceOwnerId>200278856672</instanceOwnerId>
                        <deviceIndex>0</deviceIndex>
                        <status>attached</status>
                        <attachTime>2017-03-28T11:32:09.000Z</attachTime>
                        <deleteOnTermination>true</deleteOnTermination>
                    </attachment>
                    <association>
                        <publicIp>34.206.127.107</publicIp>
                        <publicDnsName/>
                        <ipOwnerId>200278856672</ipOwnerId>
                        <allocationId>eipalloc-a1ec7390</allocationId>
                        <associationId>eipassoc-c774b7f7</associationId>
                    </association>
                    <tagSet/>
                    <privateIpAddressesSet>
                        <item>
                            <privateIpAddress>10.2.0.104</privateIpAddress>
                            <primary>true</primary>
                            <association>
                                <publicIp>34.206.127.107</publicIp>
                                <publicDnsName/>
                                <ipOwnerId>200278856672</ipOwnerId>
                                <allocationId>eipalloc-a1ec7390</allocationId>
                                <associationId>eipassoc-c774b7f7</associationId>
                            </association>
                        </item>
                    </privateIpAddressesSet>
                    <ipv6AddressesSet/>
                </item>
            </networkInterfaceSet>
        </DescribeNetworkInterfacesResponse>
    http_version: 
  recorded_at: Tue, 18 Apr 2017 11:06:14 GMT
- request:
    method: post
    uri: https://ec2.us-east-1.amazonaws.com/
    body:
      encoding: UTF-8
      string: Action=DescribeAvailabilityZones&Filter.1.Name=zone-name&Filter.1.Value.1=us-east-1c&Version=2016-11-15
    headers:
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby2/2.8.14 ruby/2.3.0 x86_64-linux resources
      X-Amz-Date:
      - 20170418T110614Z
      X-Amz-Content-Sha256:
      - 5dfa72ee56d05dff896933ac98ddeb0ad169e32cab5750853b5b2cea73a864e0
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AMAZON_CLIENT_ID/20170418/us-east-1/ec2/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=82b2aca88929c8e421b6959933440b7890e818a30bfcbdc9903f7bd50347f752
      Content-Length:
      - '103'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - text/xml;charset=UTF-8
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Date:
      - Tue, 18 Apr 2017 11:06:14 GMT
      Server:
      - AmazonEC2
    body:
      encoding: UTF-8
      string: |-
        <?xml version="1.0" encoding="UTF-8"?>
        <DescribeAvailabilityZonesResponse xmlns="http://ec2.amazonaws.com/doc/2016-11-15/">
            <requestId>bf6befdb-b2a9-45ca-98dd-3cb5d26e1b88</requestId>
            <availabilityZoneInfo>
                <item>
                    <zoneName>us-east-1c</zoneName>
                    <zoneState>available</zoneState>
                    <regionName>us-east-1</regionName>
                    <messageSet/>
                </item>
            </availabilityZoneInfo>
        </DescribeAvailabilityZonesResponse>
    http_version: 
  recorded_at: Tue, 18 Apr 2017 11:06:15 GMT
- request:
    method: post
    uri: https://ec2.us-east-1.amazonaws.com/
    body:
      encoding: UTF-8
      string: Action=DescribeKeyPairs&Filter.1.Name=key-name&Filter.1.Value.1=EmsRefreshSpec-KeyPair&Version=2016-11-15
    headers:
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby2/2.8.14 ruby/2.3.0 x86_64-linux resources
      X-Amz-Date:
      - 20170418T110615Z
      X-Amz-Content-Sha256:
      - 8b897801bc6737ad27423b50d05f4c5a3cb37aff5adc92042c314bf391679416
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AMAZON_CLIENT_ID/20170418/us-east-1/ec2/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=2c940a81967f43e3412e5014fbc37913422d7b840a95645832cca4ccc5012457
      Content-Length:
      - '105'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - text/xml;charset=UTF-8
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Date:
      - Tue, 18 Apr 2017 11:06:14 GMT
      Server:
      - AmazonEC2
    body:
      encoding: UTF-8
      string: |-
        <?xml version="1.0" encoding="UTF-8"?>
        <DescribeKeyPairsResponse xmlns="http://ec2.amazonaws.com/doc/2016-11-15/">
            <requestId>5d2c6cfc-7ccc-44d7-913a-84413e28177d</requestId>
            <keySet>
                <item>
                    <keyName>EmsRefreshSpec-KeyPair</keyName>
                    <keyFingerprint>49:9f:3f:a4:26:48:39:94:26:06:dd:25:73:e5:da:9b:4b:1b:6c:93</keyFingerprint>
                </item>
            </keySet>
        </DescribeKeyPairsResponse>
    http_version: 
  recorded_at: Tue, 18 Apr 2017 11:06:15 GMT
- request:
    method: post
    uri: https://cloudformation.us-east-1.amazonaws.com/
    body:
      encoding: UTF-8
      string: Action=DescribeStacks&StackName=arn%3Aaws%3Acloudformation%3Aus-east-1%3A200278856672%3Astack%2FEmsRefreshSpecStack%2F07fba5b0-13aa-11e7-847a-500c28604cae&Version=2010-05-15
    headers:
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby2/2.8.14 ruby/2.3.0 x86_64-linux resources
      X-Amz-Date:
      - 20170418T110615Z
      X-Amz-Content-Sha256:
      - 99c8ef5ea8e3120f2814d625f2d33278e2948691562e4381249d71175a7b911d
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AMAZON_CLIENT_ID/20170418/us-east-1/cloudformation/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=98e23a284d8bbdd8dbeaa1971bbe9785f01e7505973bee955cd3d441c578cd3e
      Content-Length:
      - '173'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Amzn-Requestid:
      - 0aaacef6-2427-11e7-a651-578377fe2ebb
      Content-Type:
      - text/xml
      Content-Length:
      - '2091'
      Vary:
      - Accept-Encoding
      Date:
      - Tue, 18 Apr 2017 11:06:15 GMT
    body:
      encoding: UTF-8
      string: |
        <DescribeStacksResponse xmlns="http://cloudformation.amazonaws.com/doc/2010-05-15/">
          <DescribeStacksResult>
            <Stacks>
              <member>
                <Outputs>
                  <member>
                    <Description>IP Address of the host</Description>
                    <OutputKey>Bastion</OutputKey>
                    <OutputValue>arn:aws:cloudformation:us-east-1:200278856672:stack/EmsRefreshSpecStack-WebServerInstance-1PAB3IELQ8EYT/28cef7b0-13aa-11e7-8260-503aca4a58d1</OutputValue>
                  </member>
                </Outputs>
                <CreationTime>2017-03-28T11:31:05.748Z</CreationTime>
                <NotificationARNs/>
                <StackId>arn:aws:cloudformation:us-east-1:200278856672:stack/EmsRefreshSpecStack/07fba5b0-13aa-11e7-847a-500c28604cae</StackId>
                <StackName>EmsRefreshSpecStack</StackName>
                <Description>AWS CloudFormation Sample Template vpc_single_instance_in_subnet.template: Sample template showing how to create a VPC and add an EC2 instance with an Elastic IP address and a security group. **WARNING** This template creates an Amazon EC2 instance. You will be billed for the AWS resources used if you create a stack from this template.</Description>
                <StackStatus>CREATE_COMPLETE</StackStatus>
                <DisableRollback>false</DisableRollback>
                <Tags/>
                <Parameters>
                  <member>
                    <ParameterKey>KeyName</ParameterKey>
                    <ParameterValue>EmsRefreshSpec-KeyPair</ParameterValue>
                  </member>
                  <member>
                    <ParameterKey>SSHLocation</ParameterKey>
                    <ParameterValue>0.0.0.0/0</ParameterValue>
                  </member>
                  <member>
                    <ParameterKey>DBRootPassword</ParameterKey>
                    <ParameterValue>****</ParameterValue>
                  </member>
                  <member>
                    <ParameterKey>InstanceType</ParameterKey>
                    <ParameterValue>t2.nano</ParameterValue>
                  </member>
                </Parameters>
              </member>
            </Stacks>
          </DescribeStacksResult>
          <ResponseMetadata>
            <RequestId>0aaacef6-2427-11e7-a651-578377fe2ebb</RequestId>
          </ResponseMetadata>
        </DescribeStacksResponse>
    http_version: 
  recorded_at: Tue, 18 Apr 2017 11:06:16 GMT
- request:
    method: post
    uri: https://cloudformation.us-east-1.amazonaws.com/
    body:
      encoding: UTF-8
      string: Action=DescribeStacks&StackName=arn%3Aaws%3Acloudformation%3Aus-east-1%3A200278856672%3Astack%2FEmsRefreshSpecStack-WebServerInstance-1PAB3IELQ8EYT%2F28cef7b0-13aa-11e7-8260-503aca4a58d1&Version=2010-05-15
    headers:
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby2/2.8.14 ruby/2.3.0 x86_64-linux resources
      X-Amz-Date:
      - 20170418T110616Z
      X-Amz-Content-Sha256:
      - 9ff597a58e43478edc9a515b9a129640eadea988b0102cae804f6ac7e59a2262
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AMAZON_CLIENT_ID/20170418/us-east-1/cloudformation/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=7db179a875a799e20c316d7c3c63cd3c89ce1c7a1f23bad5a3d3fc011bf39c44
      Content-Length:
      - '205'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Amzn-Requestid:
      - 0ae9acbb-2427-11e7-a651-578377fe2ebb
      Content-Type:
      - text/xml
      Content-Length:
      - '2340'
      Vary:
      - Accept-Encoding
      Date:
      - Tue, 18 Apr 2017 11:06:16 GMT
    body:
      encoding: UTF-8
      string: |
        <DescribeStacksResponse xmlns="http://cloudformation.amazonaws.com/doc/2010-05-15/">
          <DescribeStacksResult>
            <Stacks>
              <member>
                <Outputs>
                  <member>
                    <Description>Newly created application URL</Description>
                    <OutputKey>URL</OutputKey>
                    <OutputValue>http://34.206.127.107</OutputValue>
                  </member>
                </Outputs>
                <CreationTime>2017-03-28T11:32:01.151Z</CreationTime>
                <NotificationARNs/>
                <StackId>arn:aws:cloudformation:us-east-1:200278856672:stack/EmsRefreshSpecStack-WebServerInstance-1PAB3IELQ8EYT/28cef7b0-13aa-11e7-8260-503aca4a58d1</StackId>
                <StackName>EmsRefreshSpecStack-WebServerInstance-1PAB3IELQ8EYT</StackName>
                <Description>AWS CloudFormation Sample Template VPC_Single_Instance_In_Subnet: Sample template showing how to create a VPC and add an EC2 instance with an Elastic IP address and a security group. **WARNING** This template creates an Amazon EC2 instance. You will be billed for the AWS resources used if you create a stack from this template.</Description>
                <StackStatus>CREATE_COMPLETE</StackStatus>
                <DisableRollback>true</DisableRollback>
                <Tags/>
                <Parameters>
                  <member>
                    <ParameterKey>KeyName</ParameterKey>
                    <ParameterValue>EmsRefreshSpec-KeyPair</ParameterValue>
                  </member>
                  <member>
                    <ParameterKey>SSHLocation</ParameterKey>
                    <ParameterValue>0.0.0.0/0</ParameterValue>
                  </member>
                  <member>
                    <ParameterKey>InstanceSecurityGroupID</ParameterKey>
                    <ParameterValue>sg-a5109cda</ParameterValue>
                  </member>
                  <member>
                    <ParameterKey>DBRootPassword</ParameterKey>
                    <ParameterValue>****</ParameterValue>
                  </member>
                  <member>
                    <ParameterKey>SubnetID</ParameterKey>
                    <ParameterValue>subnet-fc014299</ParameterValue>
                  </member>
                  <member>
                    <ParameterKey>InstanceType</ParameterKey>
                    <ParameterValue>t2.nano</ParameterValue>
                  </member>
                </Parameters>
              </member>
            </Stacks>
          </DescribeStacksResult>
          <ResponseMetadata>
            <RequestId>0ae9acbb-2427-11e7-a651-578377fe2ebb</RequestId>
          </ResponseMetadata>
        </DescribeStacksResponse>
    http_version: 
  recorded_at: Tue, 18 Apr 2017 11:06:16 GMT
- request:
    method: post
    uri: https://cloudformation.us-east-1.amazonaws.com/
    body:
      encoding: UTF-8
      string: Action=ListStackResources&StackName=EmsRefreshSpecStack&Version=2010-05-15
    headers:
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby2/2.8.14 ruby/2.3.0 x86_64-linux resources
      X-Amz-Date:
      - 20170418T110616Z
      X-Amz-Content-Sha256:
      - 5129d3e8ebb78afbee802141b221fa01c75c48ea0420549a3a199f5af6b9849c
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AMAZON_CLIENT_ID/20170418/us-east-1/cloudformation/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=a0ebf0c90a2097b56c1f7dc79d8a55228334ac299a6713240376d9b9f8208abc
      Content-Length:
      - '74'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Amzn-Requestid:
      - 0b355b70-2427-11e7-9156-1501004b1c3b
      Content-Type:
      - text/xml
      Content-Length:
      - '6665'
      Vary:
      - Accept-Encoding
      Date:
      - Tue, 18 Apr 2017 11:06:16 GMT
    body:
      encoding: UTF-8
      string: |
        <ListStackResourcesResponse xmlns="http://cloudformation.amazonaws.com/doc/2010-05-15/">
          <ListStackResourcesResult>
            <StackResourceSummaries>
              <member>
                <LastUpdatedTimestamp>2017-03-28T11:31:56.486Z</LastUpdatedTimestamp>
                <PhysicalResourceId>EmsRe-Attac-1W8NMCFM5GMWN</PhysicalResourceId>
                <ResourceStatus>CREATE_COMPLETE</ResourceStatus>
                <LogicalResourceId>AttachGateway</LogicalResourceId>
                <ResourceType>AWS::EC2::VPCGatewayAttachment</ResourceType>
              </member>
              <member>
                <LastUpdatedTimestamp>2017-03-28T11:32:01.454Z</LastUpdatedTimestamp>
                <PhysicalResourceId>EmsRe-Inbou-13JPRJ9UPD37K</PhysicalResourceId>
                <ResourceStatus>CREATE_COMPLETE</ResourceStatus>
                <LogicalResourceId>InboundHTTPNetworkAclEntry</LogicalResourceId>
                <ResourceType>AWS::EC2::NetworkAclEntry</ResourceType>
              </member>
              <member>
                <LastUpdatedTimestamp>2017-03-28T11:32:00.663Z</LastUpdatedTimestamp>
                <PhysicalResourceId>EmsRe-Inbou-1TCRTU8N54SK2</PhysicalResourceId>
                <ResourceStatus>CREATE_COMPLETE</ResourceStatus>
                <LogicalResourceId>InboundResponsePortsNetworkAclEntry</LogicalResourceId>
                <ResourceType>AWS::EC2::NetworkAclEntry</ResourceType>
              </member>
              <member>
                <LastUpdatedTimestamp>2017-03-28T11:32:00.949Z</LastUpdatedTimestamp>
                <PhysicalResourceId>EmsRe-Inbou-CJ3JBJ88FX1G</PhysicalResourceId>
                <ResourceStatus>CREATE_COMPLETE</ResourceStatus>
                <LogicalResourceId>InboundSSHNetworkAclEntry</LogicalResourceId>
                <ResourceType>AWS::EC2::NetworkAclEntry</ResourceType>
              </member>
              <member>
                <LastUpdatedTimestamp>2017-03-28T11:31:56.007Z</LastUpdatedTimestamp>
                <PhysicalResourceId>sg-a5109cda</PhysicalResourceId>
                <ResourceStatus>CREATE_COMPLETE</ResourceStatus>
                <LogicalResourceId>InstanceSecurityGroup</LogicalResourceId>
                <ResourceType>AWS::EC2::SecurityGroup</ResourceType>
              </member>
              <member>
                <LastUpdatedTimestamp>2017-03-28T11:31:34.761Z</LastUpdatedTimestamp>
                <PhysicalResourceId>igw-3512f553</PhysicalResourceId>
                <ResourceStatus>CREATE_COMPLETE</ResourceStatus>
                <LogicalResourceId>InternetGateway</LogicalResourceId>
                <ResourceType>AWS::EC2::InternetGateway</ResourceType>
              </member>
              <member>
                <LastUpdatedTimestamp>2017-03-28T11:31:39.645Z</LastUpdatedTimestamp>
                <PhysicalResourceId>acl-6ba15912</PhysicalResourceId>
                <ResourceStatus>CREATE_COMPLETE</ResourceStatus>
                <LogicalResourceId>NetworkAcl</LogicalResourceId>
                <ResourceType>AWS::EC2::NetworkAcl</ResourceType>
              </member>
              <member>
                <LastUpdatedTimestamp>2017-03-28T11:32:01.757Z</LastUpdatedTimestamp>
                <PhysicalResourceId>EmsRe-OutBo-8BSX9QMAQ2TT</PhysicalResourceId>
                <ResourceStatus>CREATE_COMPLETE</ResourceStatus>
                <LogicalResourceId>OutBoundHTTPNetworkAclEntry</LogicalResourceId>
                <ResourceType>AWS::EC2::NetworkAclEntry</ResourceType>
              </member>
              <member>
                <LastUpdatedTimestamp>2017-03-28T11:32:00.400Z</LastUpdatedTimestamp>
                <PhysicalResourceId>EmsRe-OutBo-PPPYAVY4IYMG</PhysicalResourceId>
                <ResourceStatus>CREATE_COMPLETE</ResourceStatus>
                <LogicalResourceId>OutBoundHTTPSNetworkAclEntry</LogicalResourceId>
                <ResourceType>AWS::EC2::NetworkAclEntry</ResourceType>
              </member>
              <member>
                <LastUpdatedTimestamp>2017-03-28T11:32:00.228Z</LastUpdatedTimestamp>
                <PhysicalResourceId>EmsRe-OutBo-1IZG260EZTD4P</PhysicalResourceId>
                <ResourceStatus>CREATE_COMPLETE</ResourceStatus>
                <LogicalResourceId>OutBoundResponsePortsNetworkAclEntry</LogicalResourceId>
                <ResourceType>AWS::EC2::NetworkAclEntry</ResourceType>
              </member>
              <member>
                <LastUpdatedTimestamp>2017-03-28T11:32:16.628Z</LastUpdatedTimestamp>
                <PhysicalResourceId>EmsRe-Route-XI11EG6Q0G0P</PhysicalResourceId>
                <ResourceStatus>CREATE_COMPLETE</ResourceStatus>
                <LogicalResourceId>Route</LogicalResourceId>
                <ResourceType>AWS::EC2::Route</ResourceType>
              </member>
              <member>
                <LastUpdatedTimestamp>2017-03-28T11:31:40.016Z</LastUpdatedTimestamp>
                <PhysicalResourceId>rtb-e87b0491</PhysicalResourceId>
                <ResourceStatus>CREATE_COMPLETE</ResourceStatus>
                <LogicalResourceId>RouteTable</LogicalResourceId>
                <ResourceType>AWS::EC2::RouteTable</ResourceType>
              </member>
              <member>
                <LastUpdatedTimestamp>2017-03-28T11:31:55.702Z</LastUpdatedTimestamp>
                <PhysicalResourceId>subnet-fc014299</PhysicalResourceId>
                <ResourceStatus>CREATE_COMPLETE</ResourceStatus>
                <LogicalResourceId>Subnet</LogicalResourceId>
                <ResourceType>AWS::EC2::Subnet</ResourceType>
              </member>
              <member>
                <LastUpdatedTimestamp>2017-03-28T11:32:15.972Z</LastUpdatedTimestamp>
                <PhysicalResourceId>aclassoc-3d75e44c</PhysicalResourceId>
                <ResourceStatus>CREATE_COMPLETE</ResourceStatus>
                <LogicalResourceId>SubnetNetworkAclAssociation</LogicalResourceId>
                <ResourceType>AWS::EC2::SubnetNetworkAclAssociation</ResourceType>
              </member>
              <member>
                <LastUpdatedTimestamp>2017-03-28T11:32:16.169Z</LastUpdatedTimestamp>
                <PhysicalResourceId>rtbassoc-2b809153</PhysicalResourceId>
                <ResourceStatus>CREATE_COMPLETE</ResourceStatus>
                <LogicalResourceId>SubnetRouteTableAssociation</LogicalResourceId>
                <ResourceType>AWS::EC2::SubnetRouteTableAssociation</ResourceType>
              </member>
              <member>
                <LastUpdatedTimestamp>2017-03-28T11:31:34.258Z</LastUpdatedTimestamp>
                <PhysicalResourceId>vpc-c9062baf</PhysicalResourceId>
                <ResourceStatus>CREATE_COMPLETE</ResourceStatus>
                <LogicalResourceId>VPC</LogicalResourceId>
                <ResourceType>AWS::EC2::VPC</ResourceType>
              </member>
              <member>
                <LastUpdatedTimestamp>2017-03-28T11:34:43.198Z</LastUpdatedTimestamp>
                <PhysicalResourceId>arn:aws:cloudformation:us-east-1:200278856672:stack/EmsRefreshSpecStack-WebServerInstance-1PAB3IELQ8EYT/28cef7b0-13aa-11e7-8260-503aca4a58d1</PhysicalResourceId>
                <ResourceStatus>CREATE_COMPLETE</ResourceStatus>
                <LogicalResourceId>WebServerInstance</LogicalResourceId>
                <ResourceType>AWS::CloudFormation::Stack</ResourceType>
              </member>
            </StackResourceSummaries>
          </ListStackResourcesResult>
          <ResponseMetadata>
            <RequestId>0b355b70-2427-11e7-9156-1501004b1c3b</RequestId>
          </ResponseMetadata>
        </ListStackResourcesResponse>
    http_version: 
  recorded_at: Tue, 18 Apr 2017 11:06:16 GMT
- request:
    method: post
    uri: https://cloudformation.us-east-1.amazonaws.com/
    body:
      encoding: UTF-8
      string: Action=GetTemplate&StackName=EmsRefreshSpecStack&Version=2010-05-15
    headers:
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby2/2.8.14 ruby/2.3.0 x86_64-linux resources
      X-Amz-Date:
      - 20170418T110616Z
      X-Amz-Content-Sha256:
      - 4dc6d77a6dbb5ed8a7f7ff3b24280515d1c3b34596643cdface7d23473f3237f
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AMAZON_CLIENT_ID/20170418/us-east-1/cloudformation/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=e7fe66ca513c3425de2b72097633a038e6225140be27b4e2e2d822e3ce18f471
      Content-Length:
      - '67'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Amzn-Requestid:
      - 0b89e41f-2427-11e7-875c-39b75e2f2c41
      Content-Type:
      - text/xml
      Content-Length:
      - '11953'
      Vary:
      - Accept-Encoding
      Date:
      - Tue, 18 Apr 2017 11:06:17 GMT
    body:
      encoding: UTF-8
      string: "<GetTemplateResponse xmlns=\"http://cloudformation.amazonaws.com/doc/2010-05-15/\">\n
        \ <GetTemplateResult>\n    <TemplateBody>{\n  &quot;AWSTemplateFormatVersion&quot;
        : &quot;2010-09-09&quot;,\n\n  &quot;Description&quot; : &quot;AWS CloudFormation
        Sample Template vpc_single_instance_in_subnet.template: Sample template showing
        how to create a VPC and add an EC2 instance with an Elastic IP address and
        a security group. **WARNING** This template creates an Amazon EC2 instance.
        You will be billed for the AWS resources used if you create a stack from this
        template.&quot;,\n\n  &quot;Parameters&quot; : {\n\n    &quot;InstanceType&quot;
        : {\n      &quot;Description&quot; : &quot;WebServer EC2 instance type&quot;,\n
        \     &quot;Type&quot; : &quot;String&quot;,\n      &quot;Default&quot; :
        &quot;t2.nano&quot;,\n      &quot;AllowedValues&quot; : [ &quot;t2.nano&quot;,
        &quot;t1.micro&quot;,&quot;m1.small&quot;,&quot;m1.medium&quot;,&quot;m1.large&quot;,&quot;m1.xlarge&quot;,&quot;m2.xlarge&quot;,&quot;m2.2xlarge&quot;,&quot;m2.4xlarge&quot;,&quot;m3.xlarge&quot;,&quot;m3.2xlarge&quot;,&quot;c1.medium&quot;,&quot;c1.xlarge&quot;,&quot;cc1.4xlarge&quot;,&quot;cc2.8xlarge&quot;,&quot;cg1.4xlarge&quot;],\n
        \     &quot;ConstraintDescription&quot; : &quot;must be a valid EC2 instance
        type.&quot;\n    },\n\n    &quot;KeyName&quot;: {\n      &quot;Description&quot;:
        &quot;Name of an existing EC2 KeyPair to enable SSH access to the instances&quot;,\n
        \     &quot;Type&quot;: &quot;AWS::EC2::KeyPair::KeyName&quot;,\n      &quot;ConstraintDescription&quot;:
        &quot;must be the name of an existing EC2 KeyPair.&quot;\n    },\n\n    &quot;DBRootPassword&quot;:
        {\n      &quot;Description&quot;: &quot;Db password&quot;,\n      &quot;Type&quot;:
        &quot;String&quot;,\n      &quot;NoEcho&quot;: &quot;true&quot;, \n      &quot;Default&quot;:
        &quot;adminadmin&quot;\n    },\t\n\n    &quot;SSHLocation&quot; : {\n      &quot;Description&quot;
        : &quot; The IP address range that can be used to SSH to the EC2 instances&quot;,\n
        \     &quot;Type&quot;: &quot;String&quot;,\n      &quot;MinLength&quot;:
        &quot;9&quot;,\n      &quot;MaxLength&quot;: &quot;18&quot;,\n      &quot;Default&quot;:
        &quot;0.0.0.0/0&quot;,\n      &quot;AllowedPattern&quot;: &quot;(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})/(\\\\d{1,2})&quot;,\n
        \     &quot;ConstraintDescription&quot;: &quot;must be a valid IP CIDR range
        of the form x.x.x.x/x.&quot;\n    }\n  },\n\n  &quot;Mappings&quot; : {\n
        \   &quot;RegionMap&quot; : {\n      &quot;us-east-1&quot;      : { &quot;AMI&quot;
        : &quot;ami-7f418316&quot; },\n      &quot;us-west-1&quot;      : { &quot;AMI&quot;
        : &quot;ami-951945d0&quot; },\n      &quot;us-west-2&quot;      : { &quot;AMI&quot;
        : &quot;ami-16fd7026&quot; },\n      &quot;eu-west-1&quot;      : { &quot;AMI&quot;
        : &quot;ami-24506250&quot; },\n      &quot;sa-east-1&quot;      : { &quot;AMI&quot;
        : &quot;ami-3e3be423&quot; },\n      &quot;ap-southeast-1&quot; : { &quot;AMI&quot;
        : &quot;ami-74dda626&quot; },\n      &quot;ap-southeast-2&quot; : { &quot;AMI&quot;
        : &quot;ami-b3990e89&quot; },\n      &quot;ap-northeast-1&quot; : { &quot;AMI&quot;
        : &quot;ami-dcfa4edd&quot; }\n    }\n  },\n\n  &quot;Resources&quot; : {\n\n
        \   &quot;VPC&quot; : {\n      &quot;Type&quot; : &quot;AWS::EC2::VPC&quot;,\n
        \     &quot;Properties&quot; : {\n        &quot;CidrBlock&quot; : &quot;10.2.0.0/16&quot;,\n
        \       &quot;Tags&quot; : [ {&quot;Key&quot; : &quot;Application&quot;, &quot;Value&quot;
        : { &quot;Ref&quot; : &quot;AWS::StackId&quot;} } ]\n      }\n    },\n\n    &quot;Subnet&quot;
        : {\n      &quot;Type&quot; : &quot;AWS::EC2::Subnet&quot;,\n      &quot;Properties&quot;
        : {\n        &quot;VpcId&quot; : { &quot;Ref&quot; : &quot;VPC&quot; },\n
        \       &quot;CidrBlock&quot; : &quot;10.2.0.0/24&quot;,\n        &quot;Tags&quot;
        : [ {&quot;Key&quot; : &quot;Application&quot;, &quot;Value&quot; : { &quot;Ref&quot;
        : &quot;AWS::StackId&quot;} } ]\n      }\n    },\n\n    &quot;InternetGateway&quot;
        : {\n      &quot;Type&quot; : &quot;AWS::EC2::InternetGateway&quot;,\n      &quot;Properties&quot;
        : {\n        &quot;Tags&quot; : [ {&quot;Key&quot; : &quot;Application&quot;,
        &quot;Value&quot; : { &quot;Ref&quot; : &quot;AWS::StackId&quot;} } ]\n      }\n
        \   },\n\n    &quot;AttachGateway&quot; : {\n       &quot;Type&quot; : &quot;AWS::EC2::VPCGatewayAttachment&quot;,\n
        \      &quot;Properties&quot; : {\n         &quot;VpcId&quot; : { &quot;Ref&quot;
        : &quot;VPC&quot; },\n         &quot;InternetGatewayId&quot; : { &quot;Ref&quot;
        : &quot;InternetGateway&quot; }\n       }\n    },\n\n    &quot;RouteTable&quot;
        : {\n      &quot;Type&quot; : &quot;AWS::EC2::RouteTable&quot;,\n      &quot;Properties&quot;
        : {\n        &quot;VpcId&quot; : {&quot;Ref&quot; : &quot;VPC&quot;},\n        &quot;Tags&quot;
        : [ {&quot;Key&quot; : &quot;Application&quot;, &quot;Value&quot; : { &quot;Ref&quot;
        : &quot;AWS::StackId&quot;} } ]\n      }\n    },\n\n    &quot;Route&quot;
        : {\n      &quot;Type&quot; : &quot;AWS::EC2::Route&quot;,\n      &quot;DependsOn&quot;
        : &quot;AttachGateway&quot;,\n      &quot;Properties&quot; : {\n        &quot;RouteTableId&quot;
        : { &quot;Ref&quot; : &quot;RouteTable&quot; },\n        &quot;DestinationCidrBlock&quot;
        : &quot;0.0.0.0/0&quot;,\n        &quot;GatewayId&quot; : { &quot;Ref&quot;
        : &quot;InternetGateway&quot; }\n      }\n    },\n\n    &quot;SubnetRouteTableAssociation&quot;
        : {\n      &quot;Type&quot; : &quot;AWS::EC2::SubnetRouteTableAssociation&quot;,\n
        \     &quot;Properties&quot; : {\n        &quot;SubnetId&quot; : { &quot;Ref&quot;
        : &quot;Subnet&quot; },\n        &quot;RouteTableId&quot; : { &quot;Ref&quot;
        : &quot;RouteTable&quot; }\n      }\n    },\n\n    &quot;NetworkAcl&quot;
        : {\n      &quot;Type&quot; : &quot;AWS::EC2::NetworkAcl&quot;,\n      &quot;Properties&quot;
        : {\n        &quot;VpcId&quot; : {&quot;Ref&quot; : &quot;VPC&quot;},\n        &quot;Tags&quot;
        : [ {&quot;Key&quot; : &quot;Application&quot;, &quot;Value&quot; : { &quot;Ref&quot;
        : &quot;AWS::StackId&quot;} } ]\n      }\n    },\n\n    &quot;InboundHTTPNetworkAclEntry&quot;
        : {\n      &quot;Type&quot; : &quot;AWS::EC2::NetworkAclEntry&quot;,\n      &quot;Properties&quot;
        : {\n        &quot;NetworkAclId&quot; : {&quot;Ref&quot; : &quot;NetworkAcl&quot;},\n
        \       &quot;RuleNumber&quot; : &quot;100&quot;,\n        &quot;Protocol&quot;
        : &quot;6&quot;,\n        &quot;RuleAction&quot; : &quot;allow&quot;,\n        &quot;Egress&quot;
        : &quot;false&quot;,\n        &quot;CidrBlock&quot; : &quot;0.0.0.0/0&quot;,\n
        \       &quot;PortRange&quot; : {&quot;From&quot; : &quot;80&quot;, &quot;To&quot;
        : &quot;80&quot;}\n      }\n    },\n\n    &quot;InboundSSHNetworkAclEntry&quot;
        : {\n      &quot;Type&quot; : &quot;AWS::EC2::NetworkAclEntry&quot;,\n      &quot;Properties&quot;
        : {\n        &quot;NetworkAclId&quot; : {&quot;Ref&quot; : &quot;NetworkAcl&quot;},\n
        \       &quot;RuleNumber&quot; : &quot;101&quot;,\n        &quot;Protocol&quot;
        : &quot;6&quot;,\n        &quot;RuleAction&quot; : &quot;allow&quot;,\n        &quot;Egress&quot;
        : &quot;false&quot;,\n        &quot;CidrBlock&quot; : &quot;0.0.0.0/0&quot;,\n
        \       &quot;PortRange&quot; : {&quot;From&quot; : &quot;22&quot;, &quot;To&quot;
        : &quot;22&quot;}\n      }\n    },\n\n    &quot;InboundResponsePortsNetworkAclEntry&quot;
        : {\n      &quot;Type&quot; : &quot;AWS::EC2::NetworkAclEntry&quot;,\n      &quot;Properties&quot;
        : {\n        &quot;NetworkAclId&quot; : {&quot;Ref&quot; : &quot;NetworkAcl&quot;},\n
        \       &quot;RuleNumber&quot; : &quot;102&quot;,\n        &quot;Protocol&quot;
        : &quot;6&quot;,\n        &quot;RuleAction&quot; : &quot;allow&quot;,\n        &quot;Egress&quot;
        : &quot;false&quot;,\n        &quot;CidrBlock&quot; : &quot;0.0.0.0/0&quot;,\n
        \       &quot;PortRange&quot; : {&quot;From&quot; : &quot;1024&quot;, &quot;To&quot;
        : &quot;65535&quot;}\n      }\n    },\n\n    &quot;OutBoundHTTPNetworkAclEntry&quot;
        : {\n      &quot;Type&quot; : &quot;AWS::EC2::NetworkAclEntry&quot;,\n      &quot;Properties&quot;
        : {\n        &quot;NetworkAclId&quot; : {&quot;Ref&quot; : &quot;NetworkAcl&quot;},\n
        \       &quot;RuleNumber&quot; : &quot;100&quot;,\n        &quot;Protocol&quot;
        : &quot;6&quot;,\n        &quot;RuleAction&quot; : &quot;allow&quot;,\n        &quot;Egress&quot;
        : &quot;true&quot;,\n        &quot;CidrBlock&quot; : &quot;0.0.0.0/0&quot;,\n
        \       &quot;PortRange&quot; : {&quot;From&quot; : &quot;80&quot;, &quot;To&quot;
        : &quot;80&quot;}\n      }\n    },\n\n    &quot;OutBoundHTTPSNetworkAclEntry&quot;
        : {\n      &quot;Type&quot; : &quot;AWS::EC2::NetworkAclEntry&quot;,\n      &quot;Properties&quot;
        : {\n        &quot;NetworkAclId&quot; : {&quot;Ref&quot; : &quot;NetworkAcl&quot;},\n
        \       &quot;RuleNumber&quot; : &quot;101&quot;,\n        &quot;Protocol&quot;
        : &quot;6&quot;,\n        &quot;RuleAction&quot; : &quot;allow&quot;,\n        &quot;Egress&quot;
        : &quot;true&quot;,\n        &quot;CidrBlock&quot; : &quot;0.0.0.0/0&quot;,\n
        \       &quot;PortRange&quot; : {&quot;From&quot; : &quot;443&quot;, &quot;To&quot;
        : &quot;443&quot;}\n      }\n    },\n\n    &quot;OutBoundResponsePortsNetworkAclEntry&quot;
        : {\n      &quot;Type&quot; : &quot;AWS::EC2::NetworkAclEntry&quot;,\n      &quot;Properties&quot;
        : {\n        &quot;NetworkAclId&quot; : {&quot;Ref&quot; : &quot;NetworkAcl&quot;},\n
        \       &quot;RuleNumber&quot; : &quot;102&quot;,\n        &quot;Protocol&quot;
        : &quot;6&quot;,\n        &quot;RuleAction&quot; : &quot;allow&quot;,\n        &quot;Egress&quot;
        : &quot;true&quot;,\n        &quot;CidrBlock&quot; : &quot;0.0.0.0/0&quot;,\n
        \       &quot;PortRange&quot; : {&quot;From&quot; : &quot;1024&quot;, &quot;To&quot;
        : &quot;65535&quot;}\n      }\n    },\n\n    &quot;SubnetNetworkAclAssociation&quot;
        : {\n      &quot;Type&quot; : &quot;AWS::EC2::SubnetNetworkAclAssociation&quot;,\n
        \     &quot;Properties&quot; : {\n        &quot;SubnetId&quot; : { &quot;Ref&quot;
        : &quot;Subnet&quot; },\n        &quot;NetworkAclId&quot; : { &quot;Ref&quot;
        : &quot;NetworkAcl&quot; }\n      }\n    },\n\n    &quot;InstanceSecurityGroup&quot;
        : {\n      &quot;Type&quot; : &quot;AWS::EC2::SecurityGroup&quot;,\n      &quot;Properties&quot;
        : {\n        &quot;VpcId&quot; : { &quot;Ref&quot; : &quot;VPC&quot; },\n
        \       &quot;GroupDescription&quot; : &quot;Enable SSH access via port 22&quot;,\n
        \       &quot;SecurityGroupIngress&quot; : [\n          {&quot;IpProtocol&quot;
        : &quot;tcp&quot;, &quot;FromPort&quot; : &quot;22&quot;, &quot;ToPort&quot;
        : &quot;22&quot;, &quot;CidrIp&quot; : { &quot;Ref&quot; : &quot;SSHLocation&quot;}},\n
        \         { &quot;IpProtocol&quot; : &quot;tcp&quot;, &quot;FromPort&quot;
        : &quot;80&quot;, &quot;ToPort&quot; : &quot;80&quot;, &quot;CidrIp&quot;
        : &quot;0.0.0.0/0&quot;}\n         ]\n      }\n    },\n\n\n    &quot;WebServerInstance&quot;
        : {\n         &quot;Type&quot; : &quot;AWS::CloudFormation::Stack&quot;,\n
        \        &quot;DependsOn&quot; : &quot;AttachGateway&quot;,\n         &quot;Properties&quot;
        : {\n             &quot;TemplateURL&quot; : &quot;https://s3.amazonaws.com/cf-templates-13wbkx0x8rgs2-us-east-1/EmsRefreshSpecStackTemplates/cf-vpc-template-for-vm&quot;,\n
        \            &quot;Parameters&quot; : {\n                 &quot;DBRootPassword&quot;
        : { &quot;Ref&quot; : &quot;DBRootPassword&quot; },\n                 &quot;InstanceType&quot;
        : { &quot;Ref&quot; : &quot;InstanceType&quot; },\n                 &quot;KeyName&quot;
        : { &quot;Ref&quot; : &quot;KeyName&quot; },\n                 &quot;InstanceSecurityGroupID&quot;:
        { &quot;Ref&quot; : &quot;InstanceSecurityGroup&quot; },\n                 &quot;SubnetID&quot;
        : { &quot;Ref&quot; : &quot;Subnet&quot; }\n             }\n           }\n
        \   }\n  },\n\n  &quot;Outputs&quot; : {\n    &quot;Bastion&quot; : {\n      &quot;Description&quot;
        : &quot;IP Address of the host&quot;,\n      &quot;Value&quot; :  { &quot;Ref&quot;
        : &quot;WebServerInstance&quot; }\n    }\n  }\n}\n</TemplateBody>\n    <StagesAvailable>\n
        \     <member>Original</member>\n      <member>Processed</member>\n    </StagesAvailable>\n
        \ </GetTemplateResult>\n  <ResponseMetadata>\n    <RequestId>0b89e41f-2427-11e7-875c-39b75e2f2c41</RequestId>\n
        \ </ResponseMetadata>\n</GetTemplateResponse>\n"
    http_version: 
  recorded_at: Tue, 18 Apr 2017 11:06:17 GMT
- request:
    method: post
    uri: https://cloudformation.us-east-1.amazonaws.com/
    body:
      encoding: UTF-8
      string: Action=ListStackResources&StackName=EmsRefreshSpecStack-WebServerInstance-1PAB3IELQ8EYT&Version=2010-05-15
    headers:
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby2/2.8.14 ruby/2.3.0 x86_64-linux resources
      X-Amz-Date:
      - 20170418T110617Z
      X-Amz-Content-Sha256:
      - b08571f930d1018c0dece1477c75f323ed1c55b532e02a6ac107e4786b151021
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AMAZON_CLIENT_ID/20170418/us-east-1/cloudformation/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=783ec05389fe90f4292028f98ac25d1dfd0031646f2204419dfc21b8b7e92ed8
      Content-Length:
      - '106'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Amzn-Requestid:
      - 0be5e708-2427-11e7-9a59-9d4737010478
      Content-Type:
      - text/xml
      Content-Length:
      - '1038'
      Date:
      - Tue, 18 Apr 2017 11:06:17 GMT
    body:
      encoding: UTF-8
      string: |
        <ListStackResourcesResponse xmlns="http://cloudformation.amazonaws.com/doc/2010-05-15/">
          <ListStackResourcesResult>
            <StackResourceSummaries>
              <member>
                <LastUpdatedTimestamp>2017-03-28T11:34:19.414Z</LastUpdatedTimestamp>
                <PhysicalResourceId>34.206.127.107</PhysicalResourceId>
                <ResourceStatus>CREATE_COMPLETE</ResourceStatus>
                <LogicalResourceId>IPAddress</LogicalResourceId>
                <ResourceType>AWS::EC2::EIP</ResourceType>
              </member>
              <member>
                <LastUpdatedTimestamp>2017-03-28T11:33:40.838Z</LastUpdatedTimestamp>
                <PhysicalResourceId>i-015e4579bfa4fcc84</PhysicalResourceId>
                <ResourceStatus>CREATE_COMPLETE</ResourceStatus>
                <LogicalResourceId>WebServerInstance</LogicalResourceId>
                <ResourceType>AWS::EC2::Instance</ResourceType>
              </member>
            </StackResourceSummaries>
          </ListStackResourcesResult>
          <ResponseMetadata>
            <RequestId>0be5e708-2427-11e7-9a59-9d4737010478</RequestId>
          </ResponseMetadata>
        </ListStackResourcesResponse>
    http_version: 
  recorded_at: Tue, 18 Apr 2017 11:06:18 GMT
- request:
    method: post
    uri: https://cloudformation.us-east-1.amazonaws.com/
    body:
      encoding: UTF-8
      string: Action=GetTemplate&StackName=EmsRefreshSpecStack-WebServerInstance-1PAB3IELQ8EYT&Version=2010-05-15
    headers:
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby2/2.8.14 ruby/2.3.0 x86_64-linux resources
      X-Amz-Date:
      - 20170418T110618Z
      X-Amz-Content-Sha256:
      - 2f4b252fd9424087d9c2a33c5a7d744e17b92f3c0d5f86c143a7d057945c1c20
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AMAZON_CLIENT_ID/20170418/us-east-1/cloudformation/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=b6561caf93d9cb5ac756eac2208de6370885572a8f1bef806f4c815bd33c9c09
      Content-Length:
      - '99'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Amzn-Requestid:
      - 0c3ba7fc-2427-11e7-9513-a935cd313c8b
      Content-Type:
      - text/xml
      Content-Length:
      - '23157'
      Vary:
      - Accept-Encoding
      Date:
      - Tue, 18 Apr 2017 11:06:18 GMT
    body:
      encoding: UTF-8
      string: "<GetTemplateResponse xmlns=\"http://cloudformation.amazonaws.com/doc/2010-05-15/\">\n
        \ <GetTemplateResult>\n    <TemplateBody>{\n  &quot;AWSTemplateFormatVersion&quot;
        : &quot;2010-09-09&quot;,\n\n  &quot;Description&quot; : &quot;AWS CloudFormation
        Sample Template VPC_Single_Instance_In_Subnet: Sample template showing how
        to create a VPC and add an EC2 instance with an Elastic IP address and a security
        group. **WARNING** This template creates an Amazon EC2 instance. You will
        be billed for the AWS resources used if you create a stack from this template.&quot;,\n\n
        \ &quot;Parameters&quot; : {\n\n    &quot;InstanceType&quot; : {\n      &quot;Description&quot;
        : &quot;WebServer EC2 instance type&quot;,\n      &quot;Type&quot; : &quot;String&quot;,\n
        \     &quot;Default&quot; : &quot;t2.small&quot;,\n      &quot;AllowedValues&quot;
        : [ &quot;t1.micro&quot;, &quot;t2.nano&quot;, &quot;t2.micro&quot;, &quot;t2.small&quot;,
        &quot;t2.medium&quot;, &quot;t2.large&quot;, &quot;m1.small&quot;, &quot;m1.medium&quot;,
        &quot;m1.large&quot;, &quot;m1.xlarge&quot;, &quot;m2.xlarge&quot;, &quot;m2.2xlarge&quot;,
        &quot;m2.4xlarge&quot;, &quot;m3.medium&quot;, &quot;m3.large&quot;, &quot;m3.xlarge&quot;,
        &quot;m3.2xlarge&quot;, &quot;m4.large&quot;, &quot;m4.xlarge&quot;, &quot;m4.2xlarge&quot;,
        &quot;m4.4xlarge&quot;, &quot;m4.10xlarge&quot;, &quot;c1.medium&quot;, &quot;c1.xlarge&quot;,
        &quot;c3.large&quot;, &quot;c3.xlarge&quot;, &quot;c3.2xlarge&quot;, &quot;c3.4xlarge&quot;,
        &quot;c3.8xlarge&quot;, &quot;c4.large&quot;, &quot;c4.xlarge&quot;, &quot;c4.2xlarge&quot;,
        &quot;c4.4xlarge&quot;, &quot;c4.8xlarge&quot;, &quot;g2.2xlarge&quot;, &quot;g2.8xlarge&quot;,
        &quot;r3.large&quot;, &quot;r3.xlarge&quot;, &quot;r3.2xlarge&quot;, &quot;r3.4xlarge&quot;,
        &quot;r3.8xlarge&quot;, &quot;i2.xlarge&quot;, &quot;i2.2xlarge&quot;, &quot;i2.4xlarge&quot;,
        &quot;i2.8xlarge&quot;, &quot;d2.xlarge&quot;, &quot;d2.2xlarge&quot;, &quot;d2.4xlarge&quot;,
        &quot;d2.8xlarge&quot;, &quot;hi1.4xlarge&quot;, &quot;hs1.8xlarge&quot;,
        &quot;cr1.8xlarge&quot;, &quot;cc2.8xlarge&quot;, &quot;cg1.4xlarge&quot;]\n,\n
        \     &quot;ConstraintDescription&quot; : &quot;must be a valid EC2 instance
        type.&quot;\n    },\n\n    &quot;KeyName&quot;: {\n      &quot;Description&quot;
        : &quot;Name of an existing EC2 KeyPair to enable SSH access to the instance&quot;,\n
        \     &quot;Type&quot;: &quot;AWS::EC2::KeyPair::KeyName&quot;,\n      &quot;ConstraintDescription&quot;
        : &quot;must be the name of an existing EC2 KeyPair.&quot;\n    },\n\n    &quot;DBRootPassword&quot;:
        {\n      &quot;Description&quot;: &quot;Db password&quot;,\n      &quot;Type&quot;:
        &quot;String&quot;,\n      &quot;NoEcho&quot;: &quot;true&quot;, \n      &quot;Default&quot;:
        &quot;adminadmin&quot;\n    },\t\n    \n    &quot;SSHLocation&quot; : {\n
        \     &quot;Description&quot; : &quot; The IP address range that can be used
        to SSH to the EC2 instances&quot;,\n      &quot;Type&quot;: &quot;String&quot;,\n
        \     &quot;MinLength&quot;: &quot;9&quot;,\n      &quot;MaxLength&quot;:
        &quot;18&quot;,\n      &quot;Default&quot;: &quot;0.0.0.0/0&quot;,\n      &quot;AllowedPattern&quot;:
        &quot;(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})/(\\\\d{1,2})&quot;,\n
        \     &quot;ConstraintDescription&quot;: &quot;must be a valid IP CIDR range
        of the form x.x.x.x/x.&quot;\n    },\n\n    &quot;InstanceSecurityGroupID&quot;:
        {\n      &quot;Description&quot;: &quot;Security Group ID&quot;,\n      &quot;Type&quot;:
        &quot;AWS::EC2::SecurityGroup::Id&quot;,\n      &quot;ConstraintDescription&quot;:
        &quot;must be the id of an existing VPC SecurityGroup.&quot;\n    },\n    \n
        \   &quot;SubnetID&quot;: {\n      &quot;Description&quot;: &quot;Subnet ID&quot;,\n
        \     &quot;Type&quot;: &quot;AWS::EC2::Subnet::Id&quot;,\n      &quot;ConstraintDescription&quot;:
        &quot;must be the id of an existing VPC Subnet.&quot;\n    }\n  },\n\n  &quot;Mappings&quot;
        : {\n    &quot;Region2Examples&quot; : {\n      &quot;us-east-1&quot;      :
        { &quot;Examples&quot; : &quot;https://s3.amazonaws.com/cloudformation-examples-us-east-1&quot;
        },\n      &quot;us-west-2&quot;      : { &quot;Examples&quot; : &quot;https://s3-us-west-2.amazonaws.com/cloudformation-examples-us-west-2&quot;
        },\n      &quot;us-west-1&quot;      : { &quot;Examples&quot; : &quot;https://s3-us-west-1.amazonaws.com/cloudformation-examples-us-west-1&quot;
        },\n      &quot;eu-west-1&quot;      : { &quot;Examples&quot; : &quot;https://s3-eu-west-1.amazonaws.com/cloudformation-examples-eu-west-1&quot;
        },\n      &quot;eu-west-2&quot;      : { &quot;Examples&quot; : &quot;https://s3-eu-west-2.amazonaws.com/cloudformation-examples-eu-west-2&quot;
        },\n      &quot;eu-central-1&quot;   : { &quot;Examples&quot; : &quot;https://s3-eu-central-1.amazonaws.com/cloudformation-examples-eu-central-1&quot;
        },\n      &quot;ap-southeast-1&quot; : { &quot;Examples&quot; : &quot;https://s3-ap-southeast-1.amazonaws.com/cloudformation-examples-ap-southeast-1&quot;
        },\n      &quot;ap-northeast-1&quot; : { &quot;Examples&quot; : &quot;https://s3-ap-northeast-1.amazonaws.com/cloudformation-examples-ap-northeast-1&quot;
        },\n      &quot;ap-northeast-2&quot; : { &quot;Examples&quot; : &quot;https://s3-ap-northeast-2.amazonaws.com/cloudformation-examples-ap-northeast-2&quot;
        },\n      &quot;ap-southeast-2&quot; : { &quot;Examples&quot; : &quot;https://s3-ap-southeast-2.amazonaws.com/cloudformation-examples-ap-southeast-2&quot;
        },\n      &quot;ap-south-1&quot;     : { &quot;Examples&quot; : &quot;https://s3-ap-south-1.amazonaws.com/cloudformation-examples-ap-south-1&quot;
        },\n      &quot;us-east-2&quot;      : { &quot;Examples&quot; : &quot;https://s3-us-east-2.amazonaws.com/cloudformation-examples-us-east-2&quot;
        },\n      &quot;ca-central-1&quot;   : { &quot;Examples&quot; : &quot;https://s3-ca-central-1.amazonaws.com/cloudformation-examples-ca-central-1&quot;
        },\n      &quot;sa-east-1&quot;      : { &quot;Examples&quot; : &quot;https://s3-sa-east-1.amazonaws.com/cloudformation-examples-sa-east-1&quot;
        },\n      &quot;cn-north-1&quot;     : { &quot;Examples&quot; : &quot;https://s3.cn-north-1.amazonaws.com.cn/cloudformation-examples-cn-north-1&quot;
        }\n    }\n,\n    &quot;AWSInstanceType2Arch&quot; : {\n      &quot;t1.micro&quot;
        \   : { &quot;Arch&quot; : &quot;PV64&quot;   },\n      &quot;t2.nano&quot;
        \    : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;t2.micro&quot;
        \   : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;t2.small&quot;
        \   : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;t2.medium&quot;
        \  : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;t2.large&quot;
        \   : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;m1.small&quot;
        \   : { &quot;Arch&quot; : &quot;PV64&quot;   },\n      &quot;m1.medium&quot;
        \  : { &quot;Arch&quot; : &quot;PV64&quot;   },\n      &quot;m1.large&quot;
        \   : { &quot;Arch&quot; : &quot;PV64&quot;   },\n      &quot;m1.xlarge&quot;
        \  : { &quot;Arch&quot; : &quot;PV64&quot;   },\n      &quot;m2.xlarge&quot;
        \  : { &quot;Arch&quot; : &quot;PV64&quot;   },\n      &quot;m2.2xlarge&quot;
        \ : { &quot;Arch&quot; : &quot;PV64&quot;   },\n      &quot;m2.4xlarge&quot;
        \ : { &quot;Arch&quot; : &quot;PV64&quot;   },\n      &quot;m3.medium&quot;
        \  : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;m3.large&quot;
        \   : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;m3.xlarge&quot;
        \  : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;m3.2xlarge&quot;
        \ : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;m4.large&quot;
        \   : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;m4.xlarge&quot;
        \  : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;m4.2xlarge&quot;
        \ : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;m4.4xlarge&quot;
        \ : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;m4.10xlarge&quot;
        : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;c1.medium&quot;
        \  : { &quot;Arch&quot; : &quot;PV64&quot;   },\n      &quot;c1.xlarge&quot;
        \  : { &quot;Arch&quot; : &quot;PV64&quot;   },\n      &quot;c3.large&quot;
        \   : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;c3.xlarge&quot;
        \  : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;c3.2xlarge&quot;
        \ : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;c3.4xlarge&quot;
        \ : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;c3.8xlarge&quot;
        \ : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;c4.large&quot;
        \   : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;c4.xlarge&quot;
        \  : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;c4.2xlarge&quot;
        \ : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;c4.4xlarge&quot;
        \ : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;c4.8xlarge&quot;
        \ : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;g2.2xlarge&quot;
        \ : { &quot;Arch&quot; : &quot;HVMG2&quot;  },\n      &quot;g2.8xlarge&quot;
        \ : { &quot;Arch&quot; : &quot;HVMG2&quot;  },\n      &quot;r3.large&quot;
        \   : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;r3.xlarge&quot;
        \  : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;r3.2xlarge&quot;
        \ : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;r3.4xlarge&quot;
        \ : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;r3.8xlarge&quot;
        \ : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;i2.xlarge&quot;
        \  : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;i2.2xlarge&quot;
        \ : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;i2.4xlarge&quot;
        \ : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;i2.8xlarge&quot;
        \ : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;d2.xlarge&quot;
        \  : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;d2.2xlarge&quot;
        \ : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;d2.4xlarge&quot;
        \ : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;d2.8xlarge&quot;
        \ : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;hi1.4xlarge&quot;
        : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;hs1.8xlarge&quot;
        : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;cr1.8xlarge&quot;
        : { &quot;Arch&quot; : &quot;HVM64&quot;  },\n      &quot;cc2.8xlarge&quot;
        : { &quot;Arch&quot; : &quot;HVM64&quot;  }\n    },\n\n    &quot;AWSInstanceType2NATArch&quot;
        : {\n      &quot;t1.micro&quot;    : { &quot;Arch&quot; : &quot;NATPV64&quot;
        \  },\n      &quot;t2.nano&quot;     : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;t2.micro&quot;    : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;t2.small&quot;    : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;t2.medium&quot;   : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;t2.large&quot;    : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;m1.small&quot;    : { &quot;Arch&quot; : &quot;NATPV64&quot;
        \  },\n      &quot;m1.medium&quot;   : { &quot;Arch&quot; : &quot;NATPV64&quot;
        \  },\n      &quot;m1.large&quot;    : { &quot;Arch&quot; : &quot;NATPV64&quot;
        \  },\n      &quot;m1.xlarge&quot;   : { &quot;Arch&quot; : &quot;NATPV64&quot;
        \  },\n      &quot;m2.xlarge&quot;   : { &quot;Arch&quot; : &quot;NATPV64&quot;
        \  },\n      &quot;m2.2xlarge&quot;  : { &quot;Arch&quot; : &quot;NATPV64&quot;
        \  },\n      &quot;m2.4xlarge&quot;  : { &quot;Arch&quot; : &quot;NATPV64&quot;
        \  },\n      &quot;m3.medium&quot;   : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;m3.large&quot;    : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;m3.xlarge&quot;   : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;m3.2xlarge&quot;  : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;m4.large&quot;    : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;m4.xlarge&quot;   : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;m4.2xlarge&quot;  : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;m4.4xlarge&quot;  : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;m4.10xlarge&quot; : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;c1.medium&quot;   : { &quot;Arch&quot; : &quot;NATPV64&quot;
        \  },\n      &quot;c1.xlarge&quot;   : { &quot;Arch&quot; : &quot;NATPV64&quot;
        \  },\n      &quot;c3.large&quot;    : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;c3.xlarge&quot;   : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;c3.2xlarge&quot;  : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;c3.4xlarge&quot;  : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;c3.8xlarge&quot;  : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;c4.large&quot;    : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;c4.xlarge&quot;   : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;c4.2xlarge&quot;  : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;c4.4xlarge&quot;  : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;c4.8xlarge&quot;  : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;g2.2xlarge&quot;  : { &quot;Arch&quot; : &quot;NATHVMG2&quot;
        \ },\n      &quot;g2.8xlarge&quot;  : { &quot;Arch&quot; : &quot;NATHVMG2&quot;
        \ },\n      &quot;r3.large&quot;    : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;r3.xlarge&quot;   : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;r3.2xlarge&quot;  : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;r3.4xlarge&quot;  : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;r3.8xlarge&quot;  : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;i2.xlarge&quot;   : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;i2.2xlarge&quot;  : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;i2.4xlarge&quot;  : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;i2.8xlarge&quot;  : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;d2.xlarge&quot;   : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;d2.2xlarge&quot;  : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;d2.4xlarge&quot;  : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;d2.8xlarge&quot;  : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;hi1.4xlarge&quot; : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;hs1.8xlarge&quot; : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;cr1.8xlarge&quot; : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ },\n      &quot;cc2.8xlarge&quot; : { &quot;Arch&quot; : &quot;NATHVM64&quot;
        \ }\n    }\n,\n    &quot;AWSRegionArch2AMI&quot; : {\n      &quot;us-east-1&quot;
        \       : {&quot;PV64&quot; : &quot;ami-2a69aa47&quot;, &quot;HVM64&quot;
        : &quot;ami-6869aa05&quot;, &quot;HVMG2&quot; : &quot;ami-bb18efad&quot;},\n
        \     &quot;us-west-2&quot;        : {&quot;PV64&quot; : &quot;ami-7f77b31f&quot;,
        &quot;HVM64&quot; : &quot;ami-7172b611&quot;, &quot;HVMG2&quot; : &quot;ami-31912f51&quot;},\n
        \     &quot;us-west-1&quot;        : {&quot;PV64&quot; : &quot;ami-a2490dc2&quot;,
        &quot;HVM64&quot; : &quot;ami-31490d51&quot;, &quot;HVMG2&quot; : &quot;ami-0a9dcf6a&quot;},\n
        \     &quot;eu-west-1&quot;        : {&quot;PV64&quot; : &quot;ami-4cdd453f&quot;,
        &quot;HVM64&quot; : &quot;ami-f9dd458a&quot;, &quot;HVMG2&quot; : &quot;ami-873e61e1&quot;},\n
        \     &quot;eu-west-2&quot;        : {&quot;PV64&quot; : &quot;NOT_SUPPORTED&quot;,
        &quot;HVM64&quot; : &quot;ami-886369ec&quot;, &quot;HVMG2&quot; : &quot;NOT_SUPPORTED&quot;},\n
        \     &quot;eu-central-1&quot;     : {&quot;PV64&quot; : &quot;ami-6527cf0a&quot;,
        &quot;HVM64&quot; : &quot;ami-ea26ce85&quot;, &quot;HVMG2&quot; : &quot;ami-a16ba4ce&quot;},\n
        \     &quot;ap-northeast-1&quot;   : {&quot;PV64&quot; : &quot;ami-3e42b65f&quot;,
        &quot;HVM64&quot; : &quot;ami-374db956&quot;, &quot;HVMG2&quot; : &quot;ami-6b443f0c&quot;},\n
        \     &quot;ap-northeast-2&quot;   : {&quot;PV64&quot; : &quot;NOT_SUPPORTED&quot;,
        &quot;HVM64&quot; : &quot;ami-2b408b45&quot;, &quot;HVMG2&quot; : &quot;NOT_SUPPORTED&quot;},\n
        \     &quot;ap-southeast-1&quot;   : {&quot;PV64&quot; : &quot;ami-df9e4cbc&quot;,
        &quot;HVM64&quot; : &quot;ami-a59b49c6&quot;, &quot;HVMG2&quot; : &quot;ami-1c0ba17f&quot;},\n
        \     &quot;ap-southeast-2&quot;   : {&quot;PV64&quot; : &quot;ami-63351d00&quot;,
        &quot;HVM64&quot; : &quot;ami-dc361ebf&quot;, &quot;HVMG2&quot; : &quot;ami-bf0d0adc&quot;},\n
        \     &quot;ap-south-1&quot;       : {&quot;PV64&quot; : &quot;NOT_SUPPORTED&quot;,
        &quot;HVM64&quot; : &quot;ami-ffbdd790&quot;, &quot;HVMG2&quot; : &quot;ami-6135440e&quot;},\n
        \     &quot;us-east-2&quot;        : {&quot;PV64&quot; : &quot;NOT_SUPPORTED&quot;,
        &quot;HVM64&quot; : &quot;ami-f6035893&quot;, &quot;HVMG2&quot; : &quot;NOT_SUPPORTED&quot;},\n
        \     &quot;ca-central-1&quot;     : {&quot;PV64&quot; : &quot;NOT_SUPPORTED&quot;,
        &quot;HVM64&quot; : &quot;ami-730ebd17&quot;, &quot;HVMG2&quot; : &quot;NOT_SUPPORTED&quot;},\n
        \     &quot;sa-east-1&quot;        : {&quot;PV64&quot; : &quot;ami-1ad34676&quot;,
        &quot;HVM64&quot; : &quot;ami-6dd04501&quot;, &quot;HVMG2&quot; : &quot;NOT_SUPPORTED&quot;},\n
        \     &quot;cn-north-1&quot;       : {&quot;PV64&quot; : &quot;ami-77559f1a&quot;,
        &quot;HVM64&quot; : &quot;ami-8e6aa0e3&quot;, &quot;HVMG2&quot; : &quot;NOT_SUPPORTED&quot;}\n
        \   }\n\n  },\n\n  &quot;Resources&quot; : {\n    &quot;IPAddress&quot; :
        {\n      &quot;Type&quot; : &quot;AWS::EC2::EIP&quot;,\n      &quot;Properties&quot;
        : {\n        &quot;Domain&quot; : &quot;vpc&quot;,\n        &quot;InstanceId&quot;
        : { &quot;Ref&quot; : &quot;WebServerInstance&quot; }\n      }\n    },\n\n
        \   &quot;WebServerInstance&quot; : {\n      &quot;Type&quot; : &quot;AWS::EC2::Instance&quot;,\n
        \     &quot;Metadata&quot; : {\n        &quot;Comment&quot; : &quot;Install
        a simple application&quot;,\n        &quot;AWS::CloudFormation::Init&quot;
        : {\n          &quot;config&quot; : {\n            &quot;packages&quot; :
        {\n              &quot;yum&quot; : {\n                &quot;httpd&quot;             :
        []\n              }\n            },\n\n            &quot;files&quot; : {\n
        \             &quot;/var/www/html/index.html&quot; : {\n                &quot;content&quot;
        : { &quot;Fn::Join&quot; : [&quot;\\n&quot;, [\n                  &quot;&lt;img
        src=\\&quot;&quot;, {&quot;Fn::FindInMap&quot; : [&quot;Region2Examples&quot;,
        {&quot;Ref&quot; : &quot;AWS::Region&quot;}, &quot;Examples&quot;]}, &quot;/cloudformation_graphic.png\\&quot;
        alt=\\&quot;AWS CloudFormation Logo\\&quot;/&gt;&quot;,\n                  &quot;&lt;h1&gt;Congratulations,
        you have successfully launched the AWS CloudFormation sample.&lt;/h1&gt;&quot;\n
        \               ]]},\n                &quot;mode&quot;    : &quot;000644&quot;,\n
        \               &quot;owner&quot;   : &quot;root&quot;,\n                &quot;group&quot;
        \  : &quot;root&quot;\n              },\n\n              &quot;/etc/cfn/cfn-hup.conf&quot;
        : {\n                &quot;content&quot; : { &quot;Fn::Join&quot; : [&quot;&quot;,
        [\n                  &quot;[main]\\n&quot;,\n                  &quot;stack=&quot;,
        { &quot;Ref&quot; : &quot;AWS::StackId&quot; }, &quot;\\n&quot;,\n                  &quot;region=&quot;,
        { &quot;Ref&quot; : &quot;AWS::Region&quot; }, &quot;\\n&quot;\n                ]]},\n
        \               &quot;mode&quot;    : &quot;000400&quot;,\n                &quot;owner&quot;
        \  : &quot;root&quot;,\n                &quot;group&quot;   : &quot;root&quot;\n
        \             },\n\n              &quot;/etc/cfn/hooks.d/cfn-auto-reloader.conf&quot;
        : {\n                &quot;content&quot;: { &quot;Fn::Join&quot; : [&quot;&quot;,
        [\n                  &quot;[cfn-auto-reloader-hook]\\n&quot;,\n                  &quot;triggers=post.update\\n&quot;,\n
        \                 &quot;path=Resources.WebServerInstance.Metadata.AWS::CloudFormation::Init\\n&quot;,\n
        \                 &quot;action=/opt/aws/bin/cfn-init -v &quot;,\n                  &quot;
        \        --stack &quot;, { &quot;Ref&quot; : &quot;AWS::StackName&quot; },\n
        \                 &quot;         --resource WebServerInstance &quot;,\n                  &quot;
        \        --region &quot;, { &quot;Ref&quot; : &quot;AWS::Region&quot; }, &quot;\\n&quot;,\n
        \                 &quot;runas=root\\n&quot;\n                ]]}\n              }\n
        \           },\n\n            &quot;services&quot; : {\n              &quot;sysvinit&quot;
        : {\n                &quot;httpd&quot;    : { &quot;enabled&quot; : &quot;true&quot;,
        &quot;ensureRunning&quot; : &quot;true&quot; },\n                &quot;cfn-hup&quot;
        : { &quot;enabled&quot; : &quot;true&quot;, &quot;ensureRunning&quot; : &quot;true&quot;,
        \n                              &quot;files&quot; : [&quot;/etc/cfn/cfn-hup.conf&quot;,
        &quot;/etc/cfn/hooks.d/cfn-auto-reloader.conf&quot;]}\n              }\n            }\n
        \         }\n        }\n      },\n      &quot;Properties&quot; : {\n        &quot;ImageId&quot;
        : { &quot;Fn::FindInMap&quot; : [ &quot;AWSRegionArch2AMI&quot;, { &quot;Ref&quot;
        : &quot;AWS::Region&quot; },\n                          { &quot;Fn::FindInMap&quot;
        : [ &quot;AWSInstanceType2Arch&quot;, { &quot;Ref&quot; : &quot;InstanceType&quot;
        }, &quot;Arch&quot; ] } ] },\n        &quot;InstanceType&quot; : { &quot;Ref&quot;
        : &quot;InstanceType&quot; },\n        &quot;KeyName&quot; : { &quot;Ref&quot;
        : &quot;KeyName&quot; },\n        &quot;Tags&quot; : [ {&quot;Key&quot; :
        &quot;Application&quot;, &quot;Value&quot; : { &quot;Ref&quot; : &quot;AWS::StackId&quot;}
        } ],\n        &quot;NetworkInterfaces&quot; : [{\n          &quot;GroupSet&quot;
        \                : [{ &quot;Ref&quot; : &quot;InstanceSecurityGroupID&quot;
        }],\n          &quot;AssociatePublicIpAddress&quot; : &quot;true&quot;,\n
        \         &quot;DeviceIndex&quot;              : &quot;0&quot;,\n          &quot;DeleteOnTermination&quot;
        \     : &quot;true&quot;,\n          &quot;SubnetId&quot;                 :
        { &quot;Ref&quot; : &quot;SubnetID&quot; }\n        }],\n        &quot;UserData&quot;
        \      : { &quot;Fn::Base64&quot; : { &quot;Fn::Join&quot; : [&quot;&quot;,
        [\n             &quot;#!/bin/bash -xe\\n&quot;,\n             &quot;yum update
        -y aws-cfn-bootstrap\\n&quot;,\n\n             &quot;/opt/aws/bin/cfn-init
        -v &quot;,\n             &quot;         --stack &quot;, { &quot;Ref&quot;
        : &quot;AWS::StackName&quot; },\n             &quot;         --resource WebServerInstance
        &quot;,\n             &quot;         --region &quot;, { &quot;Ref&quot; :
        &quot;AWS::Region&quot; }, &quot;\\n&quot;,\n\n             &quot;/opt/aws/bin/cfn-signal
        -e $? &quot;,\n             &quot;         --stack &quot;, { &quot;Ref&quot;
        : &quot;AWS::StackName&quot; },\n             &quot;         --resource WebServerInstance
        &quot;,\n             &quot;         --region &quot;, { &quot;Ref&quot; :
        &quot;AWS::Region&quot; }, &quot;\\n&quot;\n        ]]}}\n      },\n      &quot;CreationPolicy&quot;
        : {\n        &quot;ResourceSignal&quot; : {\n          &quot;Timeout&quot;
        : &quot;PT15M&quot;\n        }\n      }\n    }\n  },\n\n  &quot;Outputs&quot;
        : {\n    &quot;URL&quot; : {\n      &quot;Value&quot; : { &quot;Fn::Join&quot;
        : [ &quot;&quot;, [&quot;http://&quot;, { &quot;Fn::GetAtt&quot; : [&quot;WebServerInstance&quot;,
        &quot;PublicIp&quot;] }]]},\n      &quot;Description&quot; : &quot;Newly created
        application URL&quot;\n    }\n  }\n}\n\n</TemplateBody>\n    <StagesAvailable>\n
        \     <member>Original</member>\n      <member>Processed</member>\n    </StagesAvailable>\n
        \ </GetTemplateResult>\n  <ResponseMetadata>\n    <RequestId>0c3ba7fc-2427-11e7-9513-a935cd313c8b</RequestId>\n
        \ </ResponseMetadata>\n</GetTemplateResponse>\n"
    http_version: 
  recorded_at: Tue, 18 Apr 2017 11:06:18 GMT
- request:
    method: post
    uri: https://ec2.us-east-1.amazonaws.com/
    body:
      encoding: UTF-8
      string: Action=DescribeImages&Filter.1.Name=image-id&Filter.1.Value.1=ami-6869aa05&Version=2016-11-15
    headers:
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby2/2.8.14 ruby/2.3.0 x86_64-linux resources
      X-Amz-Date:
      - 20170418T110618Z
      X-Amz-Content-Sha256:
      - 49411f40ac5616adf21a1c49fadea20c70150dab6cafc82b472b0564dfcd060a
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AMAZON_CLIENT_ID/20170418/us-east-1/ec2/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=8457a9ea118ad0ac44072fe27d7120e6e6dcf37a876366ffe3abe094dd9ba113
      Content-Length:
      - '93'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - text/xml;charset=UTF-8
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Date:
      - Tue, 18 Apr 2017 11:06:19 GMT
      Server:
      - AmazonEC2
    body:
      encoding: UTF-8
      string: |-
        <?xml version="1.0" encoding="UTF-8"?>
        <DescribeImagesResponse xmlns="http://ec2.amazonaws.com/doc/2016-11-15/">
            <requestId>931615f5-3a04-4e51-ac6e-95b7b6fdb993</requestId>
            <imagesSet>
                <item>
                    <imageId>ami-6869aa05</imageId>
                    <imageLocation>amazon/amzn-ami-hvm-2016.03.3.x86_64-gp2</imageLocation>
                    <imageState>available</imageState>
                    <imageOwnerId>137112412989</imageOwnerId>
                    <creationDate>2016-06-22T06:10:37.000Z</creationDate>
                    <isPublic>true</isPublic>
                    <architecture>x86_64</architecture>
                    <imageType>machine</imageType>
                    <sriovNetSupport>simple</sriovNetSupport>
                    <imageOwnerAlias>amazon</imageOwnerAlias>
                    <name>amzn-ami-hvm-2016.03.3.x86_64-gp2</name>
                    <description>Amazon Linux AMI 2016.03.3 x86_64 HVM GP2</description>
                    <rootDeviceType>ebs</rootDeviceType>
                    <rootDeviceName>/dev/xvda</rootDeviceName>
                    <blockDeviceMapping>
                        <item>
                            <deviceName>/dev/xvda</deviceName>
                            <ebs>
                                <snapshotId>snap-25dd2ac1</snapshotId>
                                <volumeSize>8</volumeSize>
                                <deleteOnTermination>true</deleteOnTermination>
                                <volumeType>gp2</volumeType>
                                <encrypted>false</encrypted>
                            </ebs>
                        </item>
                    </blockDeviceMapping>
                    <virtualizationType>hvm</virtualizationType>
                    <hypervisor>xen</hypervisor>
                    <enaSupport>true</enaSupport>
                </item>
            </imagesSet>
        </DescribeImagesResponse>
    http_version: 
  recorded_at: Tue, 18 Apr 2017 11:06:19 GMT
- request:
    method: post
    uri: https://ec2.us-east-1.amazonaws.com/
    body:
      encoding: UTF-8
      string: Action=DescribeVpcs&Filter.1.Name=vpc-id&Filter.1.Value.1=vpc-c9062baf&Version=2016-11-15
    headers:
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby2/2.8.14 ruby/2.3.0 x86_64-linux resources
      X-Amz-Date:
      - 20170418T110619Z
      X-Amz-Content-Sha256:
      - 8b51c517c63dc0159643bc81cd096b5401a4af8cfaeff486789ede171ecb1353
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AMAZON_CLIENT_ID/20170418/us-east-1/ec2/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=83b872dacf210804c592374f1fcc906e8758060e4e26f6ee421739db119bf946
      Content-Length:
      - '89'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - text/xml;charset=UTF-8
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Date:
      - Tue, 18 Apr 2017 11:06:20 GMT
      Server:
      - AmazonEC2
    body:
      encoding: UTF-8
      string: |-
        <?xml version="1.0" encoding="UTF-8"?>
        <DescribeVpcsResponse xmlns="http://ec2.amazonaws.com/doc/2016-11-15/">
            <requestId>d8b4bfcb-aa52-4992-8d1e-1e20411ee4d8</requestId>
            <vpcSet>
                <item>
                    <vpcId>vpc-c9062baf</vpcId>
                    <state>available</state>
                    <cidrBlock>10.2.0.0/16</cidrBlock>
                    <dhcpOptionsId>dopt-f24ff99c</dhcpOptionsId>
                    <tagSet>
                        <item>
                            <key>Application</key>
                            <value>arn:aws:cloudformation:us-east-1:200278856672:stack/EmsRefreshSpecStack/07fba5b0-13aa-11e7-847a-500c28604cae</value>
                        </item>
                        <item>
                            <key>aws:cloudformation:stack-name</key>
                            <value>EmsRefreshSpecStack</value>
                        </item>
                        <item>
                            <key>aws:cloudformation:logical-id</key>
                            <value>VPC</value>
                        </item>
                        <item>
                            <key>aws:cloudformation:stack-id</key>
                            <value>arn:aws:cloudformation:us-east-1:200278856672:stack/EmsRefreshSpecStack/07fba5b0-13aa-11e7-847a-500c28604cae</value>
                        </item>
                    </tagSet>
                    <instanceTenancy>default</instanceTenancy>
                    <isDefault>false</isDefault>
                </item>
            </vpcSet>
        </DescribeVpcsResponse>
    http_version: 
  recorded_at: Tue, 18 Apr 2017 11:06:20 GMT
- request:
    method: post
    uri: https://ec2.us-east-1.amazonaws.com/
    body:
      encoding: UTF-8
      string: Action=DescribeSubnets&Filter.1.Name=subnet-id&Filter.1.Value.1=subnet-fc014299&Version=2016-11-15
    headers:
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby2/2.8.14 ruby/2.3.0 x86_64-linux resources
      X-Amz-Date:
      - 20170418T110620Z
      X-Amz-Content-Sha256:
      - a37d21a45174c7877cbaa58a5a0c326a4742e47eb9dba83aaa9e28572a10e3ca
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AMAZON_CLIENT_ID/20170418/us-east-1/ec2/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=efbc252035631c3cb8cc25ca2b33ef1add3d83ca28742b4bebbb2446cdeb977f
      Content-Length:
      - '98'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - text/xml;charset=UTF-8
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Date:
      - Tue, 18 Apr 2017 11:06:20 GMT
      Server:
      - AmazonEC2
    body:
      encoding: UTF-8
      string: |-
        <?xml version="1.0" encoding="UTF-8"?>
        <DescribeSubnetsResponse xmlns="http://ec2.amazonaws.com/doc/2016-11-15/">
            <requestId>99748faa-7e4c-4195-8852-14942ac8d944</requestId>
            <subnetSet>
                <item>
                    <subnetId>subnet-fc014299</subnetId>
                    <state>available</state>
                    <vpcId>vpc-c9062baf</vpcId>
                    <cidrBlock>10.2.0.0/24</cidrBlock>
                    <ipv6CidrBlockAssociationSet/>
                    <availableIpAddressCount>249</availableIpAddressCount>
                    <availabilityZone>us-east-1c</availabilityZone>
                    <defaultForAz>false</defaultForAz>
                    <mapPublicIpOnLaunch>false</mapPublicIpOnLaunch>
                    <tagSet>
                        <item>
                            <key>aws:cloudformation:stack-name</key>
                            <value>EmsRefreshSpecStack</value>
                        </item>
                        <item>
                            <key>aws:cloudformation:stack-id</key>
                            <value>arn:aws:cloudformation:us-east-1:200278856672:stack/EmsRefreshSpecStack/07fba5b0-13aa-11e7-847a-500c28604cae</value>
                        </item>
                        <item>
                            <key>aws:cloudformation:logical-id</key>
                            <value>Subnet</value>
                        </item>
                        <item>
                            <key>Application</key>
                            <value>arn:aws:cloudformation:us-east-1:200278856672:stack/EmsRefreshSpecStack/07fba5b0-13aa-11e7-847a-500c28604cae</value>
                        </item>
                    </tagSet>
                    <assignIpv6AddressOnCreation>false</assignIpv6AddressOnCreation>
                </item>
            </subnetSet>
        </DescribeSubnetsResponse>
    http_version: 
  recorded_at: Tue, 18 Apr 2017 11:06:20 GMT
- request:
    method: post
    uri: https://ec2.us-east-1.amazonaws.com/
    body:
      encoding: UTF-8
      string: Action=DescribeSecurityGroups&Filter.1.Name=group-id&Filter.1.Value.1=sg-a5109cda&Version=2016-11-15
    headers:
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby2/2.8.14 ruby/2.3.0 x86_64-linux resources
      X-Amz-Date:
      - 20170418T110620Z
      X-Amz-Content-Sha256:
      - beccd95643f6dbf103fdb2cc0f572d896248fbb170ef91d9bfa0c28623144703
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AMAZON_CLIENT_ID/20170418/us-east-1/ec2/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=51dc66567e5e11c366e8c926fde3b7c49dd79dd11ed9392b6a7a1a25e768ab7e
      Content-Length:
      - '100'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - text/xml;charset=UTF-8
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Date:
      - Tue, 18 Apr 2017 11:06:21 GMT
      Server:
      - AmazonEC2
    body:
      encoding: UTF-8
      string: |-
        <?xml version="1.0" encoding="UTF-8"?>
        <DescribeSecurityGroupsResponse xmlns="http://ec2.amazonaws.com/doc/2016-11-15/">
            <requestId>6119a913-d9fd-4afc-9451-c1fa49a2375c</requestId>
            <securityGroupInfo>
                <item>
                    <ownerId>200278856672</ownerId>
                    <groupId>sg-a5109cda</groupId>
                    <groupName>EmsRefreshSpecStack-InstanceSecurityGroup-1PP763K6ZBVLF</groupName>
                    <groupDescription>Enable SSH access via port 22</groupDescription>
                    <vpcId>vpc-c9062baf</vpcId>
                    <ipPermissions>
                        <item>
                            <ipProtocol>tcp</ipProtocol>
                            <fromPort>80</fromPort>
                            <toPort>80</toPort>
                            <groups/>
                            <ipRanges>
                                <item>
                                    <cidrIp>0.0.0.0/0</cidrIp>
                                </item>
                            </ipRanges>
                            <ipv6Ranges/>
                            <prefixListIds/>
                        </item>
                        <item>
                            <ipProtocol>tcp</ipProtocol>
                            <fromPort>22</fromPort>
                            <toPort>22</toPort>
                            <groups/>
                            <ipRanges>
                                <item>
                                    <cidrIp>0.0.0.0/0</cidrIp>
                                </item>
                            </ipRanges>
                            <ipv6Ranges/>
                            <prefixListIds/>
                        </item>
                    </ipPermissions>
                    <ipPermissionsEgress>
                        <item>
                            <ipProtocol>-1</ipProtocol>
                            <groups/>
                            <ipRanges>
                                <item>
                                    <cidrIp>0.0.0.0/0</cidrIp>
                                </item>
                            </ipRanges>
                            <ipv6Ranges/>
                            <prefixListIds/>
                        </item>
                    </ipPermissionsEgress>
                    <tagSet>
                        <item>
                            <key>aws:cloudformation:logical-id</key>
                            <value>InstanceSecurityGroup</value>
                        </item>
                        <item>
                            <key>aws:cloudformation:stack-id</key>
                            <value>arn:aws:cloudformation:us-east-1:200278856672:stack/EmsRefreshSpecStack/07fba5b0-13aa-11e7-847a-500c28604cae</value>
                        </item>
                        <item>
                            <key>aws:cloudformation:stack-name</key>
                            <value>EmsRefreshSpecStack</value>
                        </item>
                    </tagSet>
                </item>
            </securityGroupInfo>
        </DescribeSecurityGroupsResponse>
    http_version: 
  recorded_at: Tue, 18 Apr 2017 11:06:21 GMT
- request:
    method: post
    uri: https://ec2.us-east-1.amazonaws.com/
    body:
      encoding: UTF-8
      string: Action=DescribeAddresses&Filter.1.Name=allocation-id&Filter.1.Value.1=eipalloc-a1ec7390&Version=2016-11-15
    headers:
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby2/2.8.14 ruby/2.3.0 x86_64-linux resources
      X-Amz-Date:
      - 20170418T110621Z
      X-Amz-Content-Sha256:
      - 971f05730c6aa172306c0357fc7707f64450eec94d38bd49748a5d8ba4fee511
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AMAZON_CLIENT_ID/20170418/us-east-1/ec2/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=8d2923de2ef34fff464080f3ea6ba82f2a36884f17f268576735e46de9323506
      Content-Length:
      - '106'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - text/xml;charset=UTF-8
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Date:
      - Tue, 18 Apr 2017 11:06:21 GMT
      Server:
      - AmazonEC2
    body:
      encoding: UTF-8
      string: |-
        <?xml version="1.0" encoding="UTF-8"?>
        <DescribeAddressesResponse xmlns="http://ec2.amazonaws.com/doc/2016-11-15/">
            <requestId>4cee27a2-d220-454f-b71f-2af2bfe05165</requestId>
            <addressesSet>
                <item>
                    <publicIp>34.206.127.107</publicIp>
                    <allocationId>eipalloc-a1ec7390</allocationId>
                    <domain>vpc</domain>
                    <instanceId>i-015e4579bfa4fcc84</instanceId>
                    <associationId>eipassoc-c774b7f7</associationId>
                    <networkInterfaceId>eni-39de4e2d</networkInterfaceId>
                    <networkInterfaceOwnerId>200278856672</networkInterfaceOwnerId>
                    <privateIpAddress>10.2.0.104</privateIpAddress>
                </item>
            </addressesSet>
        </DescribeAddressesResponse>
    http_version: 
  recorded_at: Tue, 18 Apr 2017 11:06:22 GMT
- request:
    method: post
    uri: https://ec2.us-east-1.amazonaws.com/
    body:
      encoding: UTF-8
      string: Action=DescribeVolumes&Filter.1.Name=volume-id&Filter.1.Value.1=vol-0360da66b06e06a36&Version=2016-11-15
    headers:
      Content-Type:
      - application/x-www-form-urlencoded; charset=utf-8
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby2/2.8.14 ruby/2.3.0 x86_64-linux resources
      X-Amz-Date:
      - 20170418T110622Z
      X-Amz-Content-Sha256:
      - f9d8c34b0d82fd2d9c7b739cf11760ca1172665fcaeb612e26c5b1f9cb2b25f2
      Authorization:
      - AWS4-HMAC-SHA256 Credential=AMAZON_CLIENT_ID/20170418/us-east-1/ec2/aws4_request,
        SignedHeaders=content-type;host;x-amz-content-sha256;x-amz-date, Signature=0622a309e820c9382c976c65458760262d48226287f4188cffccf23d969f151c
      Content-Length:
      - '104'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - text/xml;charset=UTF-8
      Transfer-Encoding:
      - chunked
      Vary:
      - Accept-Encoding
      Date:
      - Tue, 18 Apr 2017 11:06:22 GMT
      Server:
      - AmazonEC2
    body:
      encoding: UTF-8
      string: |-
        <?xml version="1.0" encoding="UTF-8"?>
        <DescribeVolumesResponse xmlns="http://ec2.amazonaws.com/doc/2016-11-15/">
            <requestId>d6bfc59e-e9ba-4776-9569-aa0f2dd57704</requestId>
            <volumeSet>
                <item>
                    <volumeId>vol-0360da66b06e06a36</volumeId>
                    <size>8</size>
                    <snapshotId>snap-25dd2ac1</snapshotId>
                    <availabilityZone>us-east-1c</availabilityZone>
                    <status>in-use</status>
                    <createTime>2017-03-28T11:32:10.407Z</createTime>
                    <attachmentSet>
                        <item>
                            <volumeId>vol-0360da66b06e06a36</volumeId>
                            <instanceId>i-015e4579bfa4fcc84</instanceId>
                            <device>/dev/xvda</device>
                            <status>attached</status>
                            <attachTime>2017-03-28T11:32:10.000Z</attachTime>
                            <deleteOnTermination>true</deleteOnTermination>
                        </item>
                    </attachmentSet>
                    <volumeType>gp2</volumeType>
                    <iops>100</iops>
                    <encrypted>false</encrypted>
                </item>
            </volumeSet>
        </DescribeVolumesResponse>
    http_version: 
  recorded_at: Tue, 18 Apr 2017 11:06:23 GMT
recorded_with: VCR 3.0.3
